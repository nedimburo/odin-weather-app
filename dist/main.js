(()=>{"use strict";let e=new class{constructor(){this.selectedTemperature="celsius"}get selectedTemperature(){return this._selectedTemperature}set selectedTemperature(e){this._selectedTemperature=e}async fetchData(e){let t={};try{const n=await fetch(`https://api.weatherapi.com/v1/current.json?key=accc068634d04769b09171233231010&q=${e}`,{mode:"cors"});if(!n.ok)throw new Error("Something went wrong.");const d=await n.json();t.location_name=d.location.name,t.local_time=d.location.localtime,t.temp_c=d.current.temp_c,t.temp_f=d.current.temp_f,t.feelslike_c=d.current.feelslike_c,t.feelslike_f=d.current.feelslike_f,t.humidity=d.current.humidity,t.condition=d.current.condition.text,t.condition_code=d.current.condition.code,t.wind_kph=d.current.wind_kph,t.wind_dir=d.current.wind_dir,t.is_day=d.current.is_day,t.last_updated=d.current.last_updated,t.uv=d.current.uv}catch(e){console.log(e),document.getElementById("warning-message").style.display="flex"}return t}async fetchConditions(){return(await fetch("https://api.jsonbin.io/v3/b/652bea4554105e766fc293db/latest",{headers:{"X-Master-Key":"$2a$10$SqSRVBshJYfvVRh87pS9ieG5XRZkm5s0eB7jmgsjdOM1TYf/7knky"}})).json()}async getImgPath(e,t){const n=await this.fetchConditions();let d;for(let t=0;t<n.record.length;t++)e==n.record[t].code&&(d=n.record[t].icon);return 1==t?`../dist/weather/64x64/day/${d}.png`:`../dist/weather/64x64/night/${d}.png`}};const t=(()=>{const t=(e,t)=>{e.classList.add("selected-button"),e.classList.remove("not-selected-button"),t.classList.add("not-selected-button"),t.classList.remove("selected-button")};return{getLocationData:async n=>{document.getElementById("warning-message").style.display="none",document.getElementById("load-screen").style.display="flex";let d=await e.fetchData(n);if("{}"!=JSON.stringify(d)){let n=await e.getImgPath(d.condition_code,d.is_day);document.getElementById("load-screen").style.display="none",((n,d)=>{document.getElementById("location-name").textContent=n.location_name,"celsius"==e._selectedTemperature?(document.getElementById("temperature").textContent=n.temp_c+" °C",document.getElementById("feelslike").textContent="Feels like: "+n.feelslike_c+" °C"):(document.getElementById("temperature").textContent=n.temp_f+" °F",document.getElementById("feelslike").textContent="Feels like: "+n.feelslike_f+" °F"),document.getElementById("condition").textContent=n.condition;let c=document.getElementById("weather-icon");c.src=d,c.classList.add("weather-image");let o=document.getElementById("day-night-container");o.innerHTML="";let l=document.createElement("img"),i=document.createElement("span");l.classList.add("day-night-img"),1==n.is_day?(l.src="../dist/icons/sun.svg",i.textContent="Day"):(l.src="../dist/icons/moon.svg",i.textContent="Night"),o.appendChild(l),o.appendChild(i),document.getElementById("wind-speed").textContent=n.wind_kph+" kph",document.getElementById("wind-direction").textContent=n.wind_dir,document.getElementById("humidity").textContent=n.humidity+" %",document.getElementById("uv-index").textContent="UV: "+n.uv,document.getElementById("local-time").textContent="Local time: "+n.local_time,document.getElementById("last-updated").textContent="Last updated: "+n.last_updated,console.log(n);let s=document.getElementById("celsius-button"),a=document.getElementById("fahrenheit-button");s.classList.add("selected-button"),a.classList.add("not-selected-button"),s.addEventListener("click",(()=>{e._selectedTemperature="celsius",t(s,a),document.getElementById("temperature").textContent=n.temp_c+" °C",document.getElementById("feelslike").textContent="Feels like: "+n.feelslike_c+" °C"})),a.addEventListener("click",(()=>{e._selectedTemperature="fahrenheit",t(a,s),document.getElementById("temperature").textContent=n.temp_f+" °F",document.getElementById("feelslike").textContent="Feels like: "+n.feelslike_f+" °F"})),"celsius"==e._selectedTemperature?t(s,a):t(a,s)})(d,n)}else document.getElementById("load-screen").style.display="none"}}})();!function(){let e=document.getElementById("submit-location-button");t.getLocationData("London"),e.addEventListener("click",(()=>{let e=document.getElementById("location-input").value;""!=e&&t.getLocationData(e)}))}()})();