(()=>{"use strict";let t=new class{async fetchData(t){let e={};try{const n=await fetch(`https://api.weatherapi.com/v1/current.json?key=accc068634d04769b09171233231010&q=${t}`,{mode:"cors"});if(!n.ok)throw new Error("Something went wrong.");const o=await n.json();e.location_name=o.location.name,e.local_time=o.location.localtime,e.temp_c=o.current.temp_c,e.temp_f=o.current.temp_f,e.feelslike_c=o.current.feelslike_c,e.feelslike_f=o.current.feelslike_f,e.humidity=o.current.humidity,e.condition=o.current.condition.text,e.condition_code=o.current.condition.code,e.wind_kph=o.current.wind_kph,e.wind_dir=o.current.wind_dir,e.is_day=o.current.is_day,e.last_updated=o.current.last_updated,e.uv=o.current.uv}catch(t){console.log(t),document.getElementById("warning-message").style.display="flex"}return e}async fetchConditions(){return(await fetch("https://api.jsonbin.io/v3/b/652bea4554105e766fc293db/latest",{headers:{"X-Master-Key":"$2a$10$SqSRVBshJYfvVRh87pS9ieG5XRZkm5s0eB7jmgsjdOM1TYf/7knky"}})).json()}async getImgPath(t,e){const n=await this.fetchConditions();let o;for(let e=0;e<n.record.length;e++)t==n.record[e].code&&(o=n.record[e].icon);return 1==e?`../dist/weather/64x64/day/${o}.png`:`../dist/weather/64x64/night/${o}.png`}};const e=(()=>{const e=(t,e)=>{t.classList.add("selected-button"),t.classList.remove("not-selected-button"),e.classList.add("not-selected-button"),e.classList.remove("selected-button")};return{getLocationData:async n=>{document.getElementById("warning-message").style.display="none";let o=await t.fetchData(n);((t,n)=>{document.getElementById("location-name").textContent=t.location_name,document.getElementById("temperature").textContent=t.temp_c+" °C",document.getElementById("condition").textContent=t.condition,document.getElementById("feelslike").textContent=t.feelslike_c+" °C";let o=document.getElementById("weather-icon-container"),d=document.createElement("img");d.src=n,o.appendChild(d);let c=document.getElementById("day-night-container");c.innerHTML="";let i=document.createElement("img"),a=document.createElement("span");i.classList.add("day-night-img"),1==t.is_day?(i.src="../dist/icons/sun.svg",a.textContent="Day"):(i.src="../dist/icons/moon.svg",a.textContent="Night"),c.appendChild(i),c.appendChild(a),document.getElementById("wind-speed").textContent=t.wind_kph,document.getElementById("wind-direction").textContent=t.wind_dir,document.getElementById("humidity").textContent=t.humidity+" %",document.getElementById("uv-index").textContent=t.uv,document.getElementById("local-time").textContent="Local time: "+t.local_time,document.getElementById("last-updated").textContent="Last updated: "+t.last_updated,console.log(t);let l=document.getElementById("celsius-button"),s=document.getElementById("fahrenheit-button");l.classList.add("selected-button"),s.classList.add("not-selected-button"),l.addEventListener("click",(()=>{e(l,s),document.getElementById("temperature").textContent=t.temp_c+" °C",document.getElementById("feelslike").textContent=t.feelslike_c+" °C"})),s.addEventListener("click",(()=>{e(s,l),document.getElementById("temperature").textContent=t.temp_f+" °F",document.getElementById("feelslike").textContent=t.feelslike_f+" °F"}))})(o,await t.getImgPath(o.condition_code,o.is_day))}}})();!function(){let t=document.getElementById("submit-location-button");e.getLocationData("London"),t.addEventListener("click",(()=>{let t=document.getElementById("location-input").value;""!=t&&e.getLocationData(t)}))}()})();